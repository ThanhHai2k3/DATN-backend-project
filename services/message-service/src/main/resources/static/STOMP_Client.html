<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test WebSocket</title>
</head>
<body>
<h2>WebSocket Test Client</h2>
<p>Status: <span id="status">Not connected</span></p>
<pre id="log"></pre>

<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
<script>
    const log = (msg) => document.getElementById("log").textContent += msg + "\n";
    const statusEl = document.getElementById("status");

    const socket = new SockJS("http://localhost:8084/ws");
    const stompClient = Stomp.over(socket);

    stompClient.connect({}, frame => {
      statusEl.textContent = "âœ… Connected";
      log("Connected: " + frame);

      stompClient.subscribe("/topic/conversation/1", message => {
        log("ğŸ“© Received: " + message.body);
      });
    }, err => {
      statusEl.textContent = "âŒ Failed to connect";
      log("Error: " + err);
    });
</script>
</body>
</html>
